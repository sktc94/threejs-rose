<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paper Plane Control</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body { margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; }
    </style>
</head>
<body>
<script>
let v = [];
let rows = 30,
  cols = 90;

function setup() {
  createCanvas(850, 850, WEBGL);
  colorMode(HSB, 360, 100, 100);
  angleMode(DEGREES);

  stroke(71, 26, 92);
  strokeWeight(6);
}

function draw() {
  background(75, 79, 51);
  orbitControl(4, 4);
  rotateX(60);

  let petals = 5;
  for (theta = 0; theta < rows; theta += 1) {
    v.push([]);
    for (let phi = 0; phi < cols; phi += 1) {
      let r =
        ((60 * pow(abs(sin((((phi * 360) / cols) * petals) / 2)), 1) + 200) *
          theta) /
        rows;
      let x = r * cos((phi * 360) / cols);
      let y = r * sin((phi * 360) / cols);
      let bumpiness = 2 * pow(r / 100, 2) * sin(phi * 12);
      let z =
        vShape(300, r / 100, 0.8, 0.15, 1.5) -
        200 +
        bump(1.5, r / 100, 12, (phi * 360) / cols);
      let pos = createVector(x, y, z);
      v[theta].push(pos);
    }
  }
  for (let theta = 0; theta < v.length; theta++) {
    for (let phi = 0; phi < v[theta].length; phi++) {
      if (theta < v.length - 1 && phi < v[theta].length - 1) {
        beginShape();
        vertex(v[theta][phi].x, v[theta][phi].y, v[theta][phi].z);
        vertex(v[theta + 1][phi].x, v[theta + 1][phi].y, v[theta + 1][phi].z);
        vertex(
          v[theta + 1][phi + 1].x,
          v[theta + 1][phi + 1].y,
          v[theta + 1][phi + 1].z
        );
        vertex(v[theta][phi + 1].x, v[theta][phi + 1].y, v[theta][phi + 1].z);
        endShape(CLOSE);
      }
    }
  }
  v = [];
}

function vShape(A, r, a, b, c) {
  return A * pow(Math.E, -b * pow(abs(r), c)) * pow(abs(r), a);
}

function bump(A, r, f, angle) {
  return 1 + A * pow(r, 2) * sin(f * angle);
}

</script>
</body>
</html>
